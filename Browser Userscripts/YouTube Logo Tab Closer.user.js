// ==UserScript==
// @name         YouTube Logo Tab Closer
// @namespace    http://apple.com/
// @version      1.1
// @description  Makes YouTube logo close current tab (mostly generated by Deepseek r1)
// @author       Bingergie
// @match        https://www.youtube.com/*
// @grant        GM.closeTab
// @run-at       document-end
// ==/UserScript==

(function() {
    'use strict';

    const attemptLogoModification = () => {
        // Try both common logo selectors
        const logoSelectors = ['a#logo', 'ytd-logo#logo', 'a.ytd-logo'];
        let logoElement;
        
        for (const selector of logoSelectors) {
            logoElement = document.querySelector(selector);
            if (logoElement) break;
        }

        if (logoElement) {
            logoElement.href = 'javascript:void(0);';
            logoElement.style.cursor = 'pointer';
            
            logoElement.addEventListener('click', (e) => {
                e.preventDefault();
                GM.closeTab()
            });
            
            // Remove title tooltip if it exists
            logoElement.removeAttribute('title');
            return true;
        }
        return false;
    };

    // Initial attempt
    if (!attemptLogoModification()) {
        // Retry periodically in case of slow loading
        const retryInterval = setInterval(() => {
            if (attemptLogoModification()) {
                clearInterval(retryInterval);
            }
        }, 500);
    }

    // Watch for SPA navigation changes
    new MutationObserver((mutations) => {
        attemptLogoModification();
    }).observe(document.documentElement, {
        childList: true,
        subtree: true
    });
})();